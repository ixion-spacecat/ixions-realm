adventure:
  base: /adventure
  rooms:
    - id: banyan-room
      name: Banyan Room
      states:
        - id: index
          description: >
            You are standing in a large circular room dominated by an enormous banyan tree. Its thick trunk rises through an opening in the ceiling high above, while its sprawling roots stretch across the ground from wall to wall. Beneath the tangled mass, a white marble statue is enveloped by the great tree; only it's face is partially exposed.

            To the east there is a large metal door secured by a series of locks. To the west, a shady alcove branches off, its stone columns framing three separate doorways.
          choices:
            - text: look at tree
              details: The banyan tree has grown large and covered the entire room in a tangle of branches.
            - text: look at statue
              details: The statue is barely visible beneath the mass of the tree. Roots and branches cover it entirely and only half the face can be seen.
            - text: look at metal door
              details: >
                The door is secured by a heavy metal bolt that is held in place by 3 padlocks. Each padlock is labeled with a word: "routine", "fear", and "setbacks".
            - text: go to alcove
              goto: alcove

        - id: 2
          showRoomName: true
          description: >
            You are back in the room with the banyan tree. Surprisingly, it seems slightly smaller than before. Its thick trunk still rises up through the hole in the ceiling, but the sprawling roots seem to have loosened their stranglehold upon the ground. Beneath the roots, the upper torso of the statue is now visible with the lower half still held beneath the vines.

            To the east there is a large metal door secured by a series of locks. To the west, a shady alcove branches off, its stone columns framing three separate doorways.
          choices:
            - text: look at tree
              details: The banyan tree seems slightly smaller than before. It's roots are still spread across the ground but are now less constricting.
            - text: look at statue
              details: A white marble statue of a youthful figure protrudes from the vines. The lower half is still covered in roots and branches.
            - text: approach metal door
              goto: ./2-door

        - id: 2-door
          name: approach metal door
          description: >
            The door is secured by a heavy metal bolt that is held in place by 3 padlocks. Each padlock is labeled with a word: "routine", "fear", and "setbacks".
          choices:
            - text: use "determination" key on "routine" lock
              details: The key doesn't fit.
            - text: use "determination" key on "fear" lock
              details: The key doesn't fit.
            - text: use "determination" key on "setbacks" lock
              goto: ./2-unlock

        - id: 2-unlock
          name: use "determination" key on "setbacks" lock
          description: >
            The key fits! You remove the "setbacks" padlock!

    - id: alcove
      name: Shady Alcove
      states:
        - id: index
          description: >
            You are standing in an alcove, separated from the main room by a series of stone columns. To the west are three arched doorways labeled "curiosity", "courage", and "determination". The doorway labeled "determination" is open. The other doorways are sealed shut.
          choices:
            - text: enter "determination" room
              goto: determination

        - id: 2
          showRoomName: true
          description: >
            You are standing in an alcove, separated from the main room by a series of stone columns. To the west are three arched doorways labeled "curiosity", "courage", and "determination". All 3 doorways are sealed shut.
          choices:
            - text: go to banyan room
              goto: banyan-room/2

      # ---
    - id: determination
      name: Determination
      states:
        - id: index
          description: >
            You are standing in a stone room with a large wooden barrel in the center. A key is suspended from a chain above the barrel. The key is too high up for you to reach. The chain wraps around a pulley in the ceiling that is connected to a rusty old crank on the right side of the room.
          choices:
            - text: look at key
              details: A skeleton key with the word "determination" inscribed on the shaft. It's too high up for you to reach.
            - text: look in barrel
              details: The barrel is full of water.
            - text: turn crank
              goto: ./crank

        - id: crank
          name: turn crank
          description: >
            The crank is in pretty bad shape, but you manage to turn it. The key begins to lower. You encounter some resistance and it becomes very hard to turn.

          choices:
            - text: turn crank harder
              goto: ./crank-harder

        - id: crank-harder
          name: turn crank harder
          description: >
            You try to force it. The rusty crank breaks off the wall with a loud "SNAP!" The chain slips and the key falls into the barrel with a soft "plunk".
          choices:
            - text: look in barrel
              details: The barrel is full of water. The key lies at the bottom, with the chain still attached and coiled up next to it.
            - text: reach into barrel
              details: You reach into the barrel and put your hand into the water. The barrel is too tall and you can't reach the bottom. You pull your arm back out in frustration, now soaking wet.
            - text: dump out barrel
              goto: ./dump

        - id: dump
          name: dump out barrel
          description: >
            You tip the barrel over, dumping the water onto the floor. The key slides out as the water rushes towards a drain on the side of the room. Before you can react, the key is washed across the room and headed straight for the drain.

            You watch in horror as the key disappears. When the water finally drains, you can see that the end of the chain is still there lying on the ground, with the other end presumably still attached to the key beneath the drain.
          choices:
            - text: pull chain
              details: You pull the chain up but the key is stuck on something just below the surface of the drain.
            - text: look around the room
              goto: ./look

        - id: look
          name: look around the room
          description: >
            You look around the room for anything that can help you get the key out of the drain. Now that the barrel is tipped over, you can see that there's a small prybar attached to the bottom.
          choices:
            - text: take prybar
              goto: ./take-prybar

        - id: take-prybar
          name: take prybar
          description: >
            You take the prybar from the bottom of the barrel.
          choices:
            - text: use prybar on drain
              goto: ./use-prybar

        - id: use-prybar
          name: use prybar on drain
          description: >
            You use the prybar to remove the drain cover. The chain comes out of the drain and the key is within reach.
          choices:
            - text: take key
              goto: ./take-key

        - id: take-key
          name: take key
          description: >
            You take the key off the chain and finally hold it in your hand.

            You now have a skeleton key with the word "determination" inscribed on the shaft.
          choices:
            - text: return to alcove
              goto: ./exit

        - id: exit
          name: return to alcove
          description: >
            You leave the "determination" room, key in hand. The door closes and seals shut behind you.
          choices:
            - text: continue
              goto: alcove/2
